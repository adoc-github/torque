spec_version: 2
description: ADOC original blueprint.

# blueprint inputs can be provided by the user, API or CI plugin when creating an environment from this blueprint.
# inputs:
#   execution_host:
#     type: execution-host
inputs:
  db_username:
    type: string
    default: adminuser
  db_password:
    type: string
    sensitive: true
    default: p1a2s3s4

# blueprint outputs define which data that was generated during environment provisioning will be returned to the user, API or CI.
# outputs:
#   vpc_id:
#     value: '{{ .grains.aws-vpc.outputs.vpc_id }}'

grains:
  database:
    kind: terraform
    spec:
      source:
        store: eks-terraform
        path: assets/wordpress-env/database
      host:
        name: Quali
      authentication:
        - adoc-aws-user
      inputs:
        - db_name: example_db
        - username: '{{ .inputs.db_username }}'
        - password: '{{ .inputs.db_password }}'
        - region: ap-northeast-1
      outputs:
        - hostname
        - connection_string
  # wordpress:
  #   kind: helm
  #   # depends-on: mySqlDB, s3Bucket
  #   spec:
  #     source:
  #       store: eks-terraform
  #       path: assets/wordpress-env/wordpress
  #     host:
  #       name: adoc-eks
  #       service-account: adoc-sa
  #     # commands:
  #     #   - "dep up xxx"
  #     # scripts:
  #     #   post-helm-install:
  #     #     source:
  #     #       store: eks-terraform
  #     #       path:  assets/shell-scripts/get-robot-web-address.sh
  #     #     outputs:
  #     #       - frontend
  #     # inputs:
